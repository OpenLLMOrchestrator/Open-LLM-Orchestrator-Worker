{
  "configVersion": "1.0",
  "worker": { "queueName": "core-task-queue", "strictBoot": false },
  "stageOrder": ["ACCESS", "MEMORY", "RETRIEVAL", "MODEL", "MCP", "TOOL", "FILTER", "POST_PROCESS", "OBSERVABILITY", "CUSTOM"],
  "pipelines": {
    "chat": {
      "defaultTimeoutSeconds": 30,
      "defaultAsyncCompletionPolicy": "ALL",
      "mergePolicy": { "type": "MERGE_POLICY", "pluginType": "MergePolicy", "name": "LAST_WINS" },
      "root": {
        "ACCESS": {
          "type": "GROUP",
          "executionMode": "SYNC",
          "children": [
            { "type": "STAGE", "pluginType": "AccessControlPlugin", "name": "com.example.plugin.AccessControlPluginImpl", "timeoutSeconds": 10 }
          ]
        },
        "MEMORY": {
          "type": "GROUP",
          "executionMode": "ASYNC",
          "asyncCompletionPolicy": "ALL",
          "mergePolicy": { "type": "MERGE_POLICY", "pluginType": "MergePolicy", "name": "com.example.plugin.RankedMerge" },
          "children": [
            { "type": "STAGE", "pluginType": "MemoryPlugin", "name": "com.example.plugin.MemoryPluginImpl" }
          ]
        },
        "MODEL": {
          "type": "GROUP",
          "executionMode": "SYNC",
          "children": [
            { "type": "STAGE", "pluginType": "ModelPlugin", "name": "com.example.plugin.ModelPluginImpl", "timeoutSeconds": 120 }
          ]
        }
      }
    },
    "document-extraction": {
      "defaultTimeoutSeconds": 60,
      "defaultAsyncCompletionPolicy": "ALL",
      "mergePolicy": { "type": "MERGE_POLICY", "pluginType": "MergePolicy", "name": "LAST_WINS" },
      "root": {
        "ACCESS": {
          "type": "GROUP",
          "executionMode": "SYNC",
          "children": [
            { "type": "STAGE", "pluginType": "AccessControlPlugin", "name": "com.example.plugin.AccessControlPluginImpl" },
            { "type": "STAGE", "pluginType": "TenantPolicyPlugin", "name": "com.example.plugin.TenantPolicyPluginImpl", "timeoutSeconds": 45 },
            { "type": "STAGE", "pluginType": "RateLimitPlugin", "name": "com.example.plugin.RateLimitPluginImpl" },
            {
              "type": "GROUP",
              "executionMode": "SYNC",
              "children": [
                { "type": "STAGE", "pluginType": "MemoryPlugin", "name": "com.example.plugin.MemoryPluginImpl" },
                { "type": "STAGE", "pluginType": "VectorStorePlugin", "name": "com.example.plugin.VectorStorePluginImpl", "timeoutSeconds": 45 },
                { "type": "STAGE", "pluginType": "ModelPlugin", "name": "com.example.plugin.ModelPluginImpl" },
                { "type": "STAGE", "pluginType": "MCPPlugin", "name": "com.example.plugin.MCPPluginImpl", "timeoutSeconds": 90 }
              ]
            }
          ]
        },
        "RETRIEVAL": {
          "type": "GROUP",
          "executionMode": "ASYNC",
          "asyncCompletionPolicy": "ALL",
          "mergePolicy": { "type": "MERGE_POLICY", "pluginType": "MergePolicy", "name": "PREFIX_BY_ACTIVITY" },
          "children": [
            { "type": "STAGE", "pluginType": "MCPPlugin", "name": "com.example.plugin.MCPPluginImpl1" },
            { "type": "STAGE", "pluginType": "MCPPlugin", "name": "com.example.plugin.MCPPluginImpl2", "timeoutSeconds": 45 },
            { "type": "STAGE", "pluginType": "MCPPlugin", "name": "com.example.plugin.MCPPluginImpl3" },
            { "type": "STAGE", "pluginType": "MCPPlugin", "name": "com.example.plugin.MCPPluginImpl4", "timeoutSeconds": 90 }
          ]
        }
      }
    }
  }
}
